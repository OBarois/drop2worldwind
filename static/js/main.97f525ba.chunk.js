(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(81)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(17),i=a.n(r),l=(a(39),a(25));window.jQuery=window.$=l;var d=a(4),s=a(5),c=a(8),u=a(6),w=a(2),h=a(7),m=(a(40),a(41),a(1)),v=a.n(m),b=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={wwdCreated:!1,currentProjection:"3D"},a.addKML=a.addKML.bind(Object(w.a)(a)),a.handleKey=a.handleKey.bind(Object(w.a)(a)),a.toggleProjection=a.toggleProjection.bind(Object(w.a)(a)),a.clearGlobe=a.clearGlobe.bind(Object(w.a)(a)),a.clearLastLayer=a.clearLastLayer.bind(Object(w.a)(a)),a.handlePaste=a.handlePaste.bind(Object(w.a)(a)),a.addHeatMap=a.addHeatMap.bind(Object(w.a)(a)),a.handleDrop=a.handleDrop.bind(Object(w.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"showSettings",value:function(e){e.preventDefault()}},{key:"handleKey",value:function(e){switch(e.key){case"p":this.toggleProjection();break;case"c":this.clearLastLayer();break;case"C":this.clearGlobe()}}},{key:"clearGlobe",value:function(){var e=this.wwd.layers;console.log(e.length);for(var t=0;t<e.length;t++)e[t].displayName&&this.wwd.removeLayer(e[t]);this.wwd.redraw()}},{key:"clearLastLayer",value:function(){var e=this.wwd.layers;this.wwd.removeLayer(e.pop()),this.wwd.redraw()}},{key:"addKML",value:function(e,t){new v.a.KmlFile(e,[]).then(function(e){var a=new v.a.RenderableLayer("Surface Shapes");a.addRenderable(e),t.wwd.removeLayer(t.state.kmlLayer),t.wwd.addLayer(a),t.wwd.redraw(),t.setState({kmlLayer:a})})}},{key:"addJson",value:function(e,t){console.log(e);var a=JSON.parse(e);Array.isArray(a)?a[0].hasOwnProperty("count")&&a[0].hasOwnProperty("lat")&&a[0].hasOwnProperty("lon")&&this.addHeatMap(a,this):this.addGeoJson(e,this)}},{key:"addGeoJson",value:function(e,t){var a=new v.a.RenderableLayer("GeoJSON");t.wwd.addLayer(a),new v.a.GeoJSONParser(e).load(null,function(e,t){var a={};return a.attributes=new v.a.ShapeAttributes(null),a.attributes.interiorColor=new v.a.Color(0,1,1,.2),a.attributes.outlineColor=new v.a.Color(1,1,1,1),a},a),t.wwd.redraw()}},{key:"addWkt",value:function(e,t){var a=new v.a.RenderableLayer("WKT");t.wwd.addLayer(a),new v.a.Wkt(e).load(null,function(e,t){var a={};return a.attributes=new v.a.ShapeAttributes(null),a.attributes.interiorColor=new v.a.Color(0,1,1,.2),a.attributes.outlineColor=new v.a.Color(1,1,1,1),a},a),t.wwd.redraw()}},{key:"addHeatMap",value:function(e,t){for(var a=[],n=0;n<e.length;n++)"GRDH"==e[n].type&&a.push(new v.a.MeasuredLocation(e[n].lon,e[n].lat,e[n].count));t.wwd.addLayer(new v.a.HeatMapLayer("HeatMap",a)),t.wwd.redraw()}},{key:"addGeoTiff",value:function(e,t){var a=new v.a.GeoTiffReader(e);a.readAsImage(function(e){var n=new v.a.SurfaceImage(a.metadata.bbox,new v.a.ImageSource(e)),o=new v.a.RenderableLayer("GeoTiff");o.addRenderable(n),t.wwd.addLayer(o)})}},{key:"toggleProjection",value:function(e){var t=["3D","Equirectangular","Mercator"];switch(this.setState({currentProjection:e||t[(t.indexOf(this.state.currentProjection)+1)%t.length]}),this.state.currentProjection){case"3D":this.wwd.globe.projection=new v.a.ProjectionWgs84;break;case"Equirectangular":this.wwd.globe.projection=new v.a.ProjectionEquirectangular;break;case"Mercator":this.wwd.globe.projection=new v.a.ProjectionMercator;break;case"North Polar":this.wwd.globe.projection=new v.a.ProjectionPolarEquidistant("North");break;case"South Polar":this.wwd.globe.projection=new v.a.ProjectionPolarEquidistant("South");break;default:this.wwd.globe=this.state.roundGlobe}this.wwd.redraw()}},{key:"handlePaste",value:function(e){var t=!0;try{JSON.parse(e.getData("Text"))}catch(a){t=!1}t?this.addJson(e.getData("Text"),this):this.addWkt(e.getData("Text"),this)}},{key:"handleDrop",value:function(e){for(var t=new FileReader,a=this,n=0;n<e.length;n++)"application/vnd.google-earth.kml+xml"===e[n].type&&(t.onload=function(){a.addKML(this.result,a)},t.readAsDataURL(e[n])),"image/tiff"===e[n].type&&(t.onload=function(){a.addGeoTiff(this.result,a)},t.readAsDataURL(e[n])),(e[n].name.endsWith(".geojson")||e[n].name.endsWith(".json"))&&(t.onload=function(){a.addJson(this.result,a)},t.readAsText(e[n]))}},{key:"componentDidMount",value:function(){if(!this.state.wwd){var e=new v.a.EarthElevationModel,t=new v.a.WorldWindow("globe",e);t.navigator.minAllowedRange=15e3,this.setState({wwd:t}),this.wwd=t;for(var a={service:"https://tiles.maps.eox.at/wms",layerNames:"s2cloudless",numLevels:19,format:"image/png",size:256,sector:v.a.Sector.FULL_SPHERE,levelZeroDelta:new v.a.Location(90,90)},n=[{layer:new v.a.WmsLayer(a,""),enabled:!0}],o=0;o<n.length;o++)n[o].layer.enabled=n[o].enabled,t.addLayer(n[o].layer);window.addEventListener("keydown",this.handleKey)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKey)}},{key:"render",value:function(){return o.a.createElement("div",{className:"Globe",id:"outer-container"},o.a.createElement("canvas",{id:"globe",style:{width:"100%",height:"100%"}}))}}]),t}(o.a.Component),f=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={className:"drop-zone-hide"},e._onDragEnter=e._onDragEnter.bind(Object(w.a)(e)),e._onDragLeave=e._onDragLeave.bind(Object(w.a)(e)),e._onDragOver=e._onDragOver.bind(Object(w.a)(e)),e._onDrop=e._onDrop.bind(Object(w.a)(e)),e._onPaste=e._onPaste.bind(Object(w.a)(e)),e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this._onDragLeave),window.addEventListener("dragenter",this._onDragEnter),window.addEventListener("dragover",this._onDragOver),document.getElementById("dragbox").addEventListener("dragleave",this._onDragLeave),window.addEventListener("drop",this._onDrop),window.addEventListener("paste",this._onPaste)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this._onDragLeave),window.removeEventListener("dragenter",this._onDragEnter),window.addEventListener("dragover",this._onDragOver),document.getElementById("dragbox").removeEventListener("dragleave",this._onDragLeave),window.removeEventListener("drop",this._onDrop),window.removeEventListener("paste",this._onPaste)}},{key:"_onDragEnter",value:function(e){return this.setState({className:"drop-zone-show"}),e.stopPropagation(),e.preventDefault(),!1}},{key:"_onDragOver",value:function(e){return e.preventDefault(),e.stopPropagation(),!1}},{key:"_onDragLeave",value:function(e){return this.setState({className:"drop-zone-hide"}),e.stopPropagation(),e.preventDefault(),!1}},{key:"_onDrop",value:function(e){e.preventDefault();var t=e.dataTransfer.files;return this.setState({files:t}),this.refs.child0.handleDrop(t),this.setState({className:"drop-zone-hide"}),!1}},{key:"_onPaste",value:function(e){return e.preventDefault(),console.log(e.clipboardData.getData("Text")),this.refs.child0.handlePaste(e.clipboardData),!1}},{key:"render",value:function(){var e=o.a.Children.map(this.props.children,function(e,t){return o.a.cloneElement(e,{ref:"child".concat(t)})});return o.a.createElement("div",null,e,o.a.createElement("div",{id:"dragbox",className:this.state.className}))}}]),t}(o.a.Component),g=a(26),p=a.n(g),y=a(27),k=(a(80),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(y.slide,{styles:{bmBurgerButton:{position:"fixed",width:"36px",height:"30px",left:"26px",top:"26px"},bmBurgerBars:{background:"#373a47"},bmCrossButton:{height:"24px",width:"24px"},bmCross:{background:"#bdc3c7"},bmMenu:{background:"rgba(27, 59, 9, .7)",padding:"3.5em 0.5em 0",fontSize:"1.5em",overflow:"hidden"},bmMorphShape:{fill:"#373a47"},bmItemList:{display:"block",color:"#b8b7ad",padding:"0.1em"},bmItem:{display:"block"},bmOverlay:{background:"rgba(0, 0, 0, 0.3)"}},disableOverlayClick:!0,noOverlay:!0},o.a.createElement("div",{className:"menuTitle"},"Shortcuts"),o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{className:"commandKey"},"f"),o.a.createElement("td",{className:"commandDesc"},"Fullscreen")),o.a.createElement("tr",null,o.a.createElement("td",{className:"commandKey"},"p"),o.a.createElement("td",{className:"commandDesc"},"Toggle projections")),o.a.createElement("tr",null,o.a.createElement("td",{className:"commandKey"},"c"),o.a.createElement("td",{className:"commandDesc"},"Delete last item")),o.a.createElement("tr",null,o.a.createElement("td",{className:"commandKey"},"C"),o.a.createElement("td",{className:"commandDesc"},"Delete all items"))))))}}]),t}(o.a.Component)),E=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this))).state={isFull:!1},a.goFull=a.goFull.bind(Object(w.a)(a)),a.handleKey=a.handleKey.bind(Object(w.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleKey",value:function(e){if(e.ctrlKey||e.metaKey)return!1;switch(e.preventDefault(),e.key){case"f":this.goFull()}return!1}},{key:"goFull",value:function(){this.setState({isFull:!0})}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKey)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKey)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(p.a,{enabled:this.state.isFull,onChange:function(t){return e.setState({isFull:t})}},o.a.createElement(k,null),o.a.createElement(f,null,o.a.createElement(b,null))))}}]),t}(n.Component),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(E,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/drop2worldwind",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/drop2worldwind","/service-worker.js");L?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):j(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):j(e)})}}()}},[[28,1,2]]]);
//# sourceMappingURL=main.97f525ba.chunk.js.map